{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)f4af270e-e75b-4f85-a3c1-f9f9511b2324","ParentGuid":"(Guid)00000000-0000-0000-0000-000000000000","Name":"(string)NetVarRx_MultiID","Properties":{"@Type":"2c41fa04:IDictionary","@Value":[{"@Key":"(Guid)829a18f2-c514-4f6e-9634-1df173429203","@Value":{"@Type":"829a18f2","@Value":{"ParentObjects":{"@Type":"fa2ee218:IDictionary","@Value":[{"@Key":"(Guid)21af5390-2942-461a-bf89-951aaf6999f1","@Value":"(Guid)fbaa1d9a-65b0-4308-a0ef-4908dddace6b"}]}}}}]},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","829a18f2":"{829a18f2-c514-4f6e-9634-1df173429203}","fa2ee218":"{fa2ee218-a39b-4b6d-b249-49dbddbd168a}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)IF NOT DWORD_TO_BOOL(dwRxSize MOD 8) THEN\n\tIdsNeeded := (dwRxSize)/8;\nELSE\n\tIdsNeeded := (dwRxSize)/8+1;\nEND_IF\n\n\nIF (IdsNeeded <= VAR_CONSTANT.MAX_ID_COUNT) THEN\n\tFOR i:= 0 TO IdsNeeded-1 DO\t\n\t\tREPEAT\n\t\t\tNetVarRx[i](\txEnable:= xEnable, \n\t\t\t\t\t\t\teChannel:= eChannel, \n\t\t\t\t\t\t\txExtended:= FALSE, \n\t\t\t\t\t\t\tudiID:= udiCanId+i);\n\t\t\t\t\t\t\t\n\t\t\tIF NetVarRx[i].uiAvailable > 0 THEN\t\n\t\t\t\tFOR k:= 0 TO 7 DO \n\t\t\t\t\td2Array_[i,k]:= NetVarRx[i].aData[k];\n\t\t\t\tEND_FOR\n\t\t\t\txError:= FALSE;\t\n\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\n\t\t\t\n\t\tUNTIL  NOT (NetVarRx[i].uiAvailable > 0)\n\t\tEND_REPEAT\n\t\n\tEND_FOR\n\t\n\tREPEAT\n\t\tRxCRC\t\t\t(\txEnable:= xEnable, \n\t\t\t\t\t\t\teChannel:= eChannel, \n\t\t\t\t\t\t\txExtended:= FALSE, \n\t\t\t\t\t\t\tudiID:= IdsNeeded+udiCanId);\n\t\tIF RxCRC.uiAvailable > 0 THEN\t\n\t\t\taCRC:= RxCRC.aData;\t\n\t\t\tCRC32_RX:= \taCRC[0] \n\t\t\t\t\t\t+ SHL(USINT_TO_DWORD(aCRC[1]), 8)  \n\t\t\t\t\t\t+ SHL(USINT_TO_DWORD(aCRC[2]), 16)  \n\t\t\t\t\t\t+ SHL(USINT_TO_DWORD(aCRC[3]), 24)  ;\n\t\t\t\t\t\t\n\t\tFOR i:=0 TO VAR_CONSTANT.MAX_ID_COUNT-1 DO\n\t\t\tFOR k:=0 TO 7 DO\n\t\t\t\tbArray_[k+idx]:= d2Array_[i,k];\n\t\t\tEND_FOR\n\t\t\tidx:= idx + 8;\n\t\tEND_FOR\n\t\t\tprivate_iomgr_memcpy(\tpSrc:= ADR(bArray_), \n\t\t\t\t\t\t\t\t\tpDst:= pRxAdr,\t \n\t\t\t\t\t\t\t\t\tiSize:= DWORD_TO_INT(dwRxSize));\n\t\t\t\t\t\t\t\t\n\t\t\tCRC32:= MEM.CRC32(pMemoryBlock:= pRxAdr, uiLength:= DWORD_TO_UINT(dwRxSize) );\n\t\t\t\n\t\t\tdwRxCounter:= dwRxCounter + 1;\n\t\n\t\t\tIF CRC32 = CRC32_RX THEN\n\t\t\t\tdwCRCvalidCounter:= dwCRCvalidCounter + 1;\n\t\t\t\txDataValid:= TRUE;\n\t\t\tELSE\n\t\t\t\txDataValid:= FALSE;\t\n\t\t\tEND_IF\t\t\n\t\tEND_IF\n\t\t\n\tUNTIL  NOT (RxCRC.uiAvailable > 0)\n\tEND_REPEAT\n\t\n\t\n\tidx:= 0;\n\t\n\nELSE\n\txError:= FALSE;\t\nEND_IF\n\ntimeout(IN:= dwRxCounterOLD=dwRxCounter, PT:= tTimeout);\nIF timeout.Q THEN\n\txError:= TRUE;\nEND_IF\ndwRxCounterOLD:= dwRxCounter;\n","LineInfoPersistence":"(string)f4af270e-e75b-4f85-a3c1-f9f9511b2324_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string){attribute 'hide_all_locals'}\n//{attribute 'hide'}\nFUNCTION_BLOCK NetVarRx_MultiID\nVAR_INPUT\n\teChannel: ifmDevice.CAN_CHANNEL;\n\txEnable:BOOL;\n\tudiCanId : UDINT;\n\tpRxAdr : POINTER TO USINT;\n\tdwRxSize : DWORD;\n\ttTimeout : TIME := T#500MS;\nEND_VAR\n\nVAR\n\tNetVarRx: ARRAY [0..VAR_CONSTANT.MAX_ID_COUNT-1] OF ifmRCAN.CAN_Rx;\n\tRxCRC: ifmRCAN.CAN_Rx;\n\t\n\tbArray_ :  ARRAY [0..VAR_CONSTANT.MAX_ID_COUNT*8-1] OF USINT;\n\td2Array_ :  ARRAY [0..VAR_CONSTANT.MAX_ID_COUNT-1,0..7] OF USINT;\n\t\n\tIdsNeeded: UDINT;\n\ti: UDINT;\n\tk: UDINT;\n\tidx: UDINT;\n\ttimeout: TON;\n\tdwRxCounterOLD: DWORD;\n\ta: BOOL;\n\taCRC: ARRAY [0..7] OF USINT;\n\tCRC32: DWORD;\n\tCRC32_RX: DWORD;\nEND_VAR\n\nVAR_OUTPUT\n\tdwRxCounter : DWORD;\n\tdwCRCvalidCounter : DWORD;\n\txDataValid: BOOL;\n\txError: BOOL;\nEND_VAR\n\n","LineInfoPersistence":"(string)f4af270e-e75b-4f85-a3c1-f9f9511b2324_Decl_LineIds"}}}},"UniqueIdGenerator":"(string)1250","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}